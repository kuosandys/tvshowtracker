(this.webpackJsonptvshow_tracker=this.webpackJsonptvshow_tracker||[]).push([[0],{35:function(e,t,c){},51:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),r=c(25),a=c.n(r),i=(c(35),c(3)),o=c(4),l=c(6),d=c.n(l),u=c(11),j=c(10),h=c(0);var b=function(e){var t=e.show,c=e.children,n=Object(o.g)();return Object(h.jsx)(j.b,{to:"".concat(n.url,"/").concat(t.id),children:c})};var x=function(e){var t,c,n,s,r,a,i=e.show,o=e.children;return Object(h.jsxs)("div",{className:"flex flex-col items-stretch overflow-hidden h-96 w-56 text-white m-4 rounded bg-gray-800",children:[Object(h.jsx)(b,{show:i,children:Object(h.jsx)("img",{src:null===(t=i.image)||void 0===t?void 0:t.medium,alt:i.name,className:"h-72 w-56 mx-auto bg-gray-300 text-lg text-center italic text-white align"})}),Object(h.jsx)("h2",{className:"text-2xl m-2 text-center truncate",children:i.name}),Object(h.jsxs)("section",{className:"self-stretch flex justify-between items-center text-sm mx-4",children:[Object(h.jsxs)("div",{className:"flex items-center",children:[Object(h.jsx)("img",{src:"https://www.countryflags.io/".concat(null===(c=i.network)||void 0===c||null===(n=c.country)||void 0===n?void 0:n.code.toLowerCase(),"/flat/32.png"),alt:(null===(s=i.network)||void 0===s||null===(r=s.country)||void 0===r?void 0:r.code)||"",className:"mr-2"}),Object(h.jsx)("h3",{className:"text-lg",children:"".concat((null===(a=i.premiered)||void 0===a?void 0:a.slice(0,4))||"-")})]}),o]})]})},m=c(13),O=c(14);var f=function(e){var t=e.showId,c=e.trackedShows,n=e.handleTrack;return Object(h.jsx)("button",{onClick:function(){return n(t)},className:"rounded-full h-8 w-8 border-2 ".concat(c.includes(t)?"border-indigo-300 bg-indigo-300":"border-indigo-300 hover:bg-indigo-300"),children:c.includes(t)?Object(h.jsx)(m.a,{icon:O.a,className:"text-gray-800"}):Object(h.jsx)(m.a,{icon:O.d,className:"text-white"})})};var p=function(e){var t=e.trackedShows,c=e.handleTrack,s=e.searchQuery,r=e.setSearchRequested,a=Object(n.useState)([]),o=Object(i.a)(a,2),l=o[0],j=o[1],b=Object(n.useState)(!1),m=Object(i.a)(b,2),O=m[0],p=m[1];return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(d.a.mark((function e(){var t,c,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.tvmaze.com/search/shows?q=".concat(s));case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,n=Object.values(c).sort((function(e,t){return e.score<t.score})),j(n),p(!0),r(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),alert(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}})()()}),[s,r]),Object(h.jsxs)("div",{className:"max-w-screen-lg mx-auto pt-10",children:[Object(h.jsxs)("p",{className:"text-center italic",children:['Search results for "',s,'"']}),Object(h.jsx)("div",{className:"flex flex-wrap justify-center",children:O&&l.map((function(e){return Object(h.jsx)(x,{show:e.show,children:Object(h.jsx)(f,{showId:e.show.id,trackedShows:t,handleTrack:c})},e.show.id)}))})]})};var v=function(e){var t=e.children;return Object(h.jsxs)("div",{className:"fixed top-0 left-0 right-0 py-1 flex items-center justify-between bg-indigo-900 text-white",children:[Object(h.jsxs)("ul",{className:"flex h-12 items-center",children:[Object(h.jsx)("li",{className:"mx-5 font-bold hover:underline",children:Object(h.jsx)(j.b,{to:"/",children:"Home"})}),Object(h.jsx)("li",{className:"mx-5 font-bold hover:underline",children:Object(h.jsx)(j.b,{to:"/shows",children:"My Shows"})}),Object(h.jsx)("li",{className:"mx-5 font-bold hover:underline",children:Object(h.jsx)(j.b,{to:"/stats",children:"Stats"})})]}),t]})};var w=function(e){var t=e.trackedShows,c=e.handleTrack,n=e.showsData;return Object(h.jsx)("div",{className:"flex flex-wrap justify-center max-w-screen-lg mx-auto pt-10",children:n.map((function(e){return Object(h.jsx)(x,{show:e,children:Object(h.jsx)(f,{showId:e.id,trackedShows:t,handleTrack:c})},e.id)}))})};var g=function(e){var t,c,n,s,r,a=e.show;return Object(h.jsxs)("div",{className:"max-w-screen-md mx-auto pt-10 flex flex-col bg-gray-800 text-white",children:[Object(h.jsxs)("div",{className:"ml-10 flex",children:[Object(h.jsx)("img",{src:null===(t=a.image)||void 0===t?void 0:t.medium,alt:"TV show poster",className:"max-h-80 my-auto"}),Object(h.jsxs)("section",{className:"ml-10 my-auto",children:[Object(h.jsx)("h2",{className:"text-3xl my-5",children:a.name}),Object(h.jsxs)("h3",{children:[Object(h.jsx)("span",{className:"text-indigo-200",children:"Country: "}),(null===(c=a.network)||void 0===c||null===(n=c.country)||void 0===n?void 0:n.name)||"None"]}),Object(h.jsxs)("h3",{children:[Object(h.jsx)("span",{className:"text-indigo-200",children:"Language: "}),a.language]}),Object(h.jsxs)("h3",{children:[Object(h.jsx)("span",{className:"text-indigo-200",children:"Premiered: "}),(null===(s=a.premiered)||void 0===s?void 0:s.slice(0,4))||"Unknown"]}),Object(h.jsxs)("h3",{children:[Object(h.jsx)("span",{className:"text-indigo-200",children:"Status: "}),a.status]}),Object(h.jsxs)("h3",{children:[Object(h.jsx)("span",{className:"text-indigo-200",children:"Genres: "}),null===(r=a.genres)||void 0===r?void 0:r.join(", ")]})]})]}),Object(h.jsx)("section",{children:Object(h.jsx)("p",{dangerouslySetInnerHTML:{__html:a.summary},className:"my-5 mx-10 leading-relaxed"})})]})},y=c(12),N=c(30),S=c(29),k=c(27),E=c.n(k),T=c(53);var I=function(e){var t,c,n,s,r=e.episode,a=e.timezone;return Object(h.jsxs)("section",{className:"grid grid-cols-3 my-3",children:[Object(h.jsx)("img",{src:null===(t=r.image)||void 0===t?void 0:t.medium,alt:r.name}),Object(h.jsxs)("div",{className:"col-span-2 pl-5",children:[Object(h.jsx)("h4",{className:"italic",children:"Aired ".concat(Object(T.a)(Object(S.a)(Date,Object(y.a)(null===(c=r.airdate)||void 0===c?void 0:c.split("-"))),"LLL do yyyy")," ").concat(r.airtime," ").concat((null===(n=E()(r.airdate))||void 0===n||null===(s=n.tz(a))||void 0===s?void 0:s.zoneAbbr())||"")}),Object(h.jsx)("p",{dangerouslySetInnerHTML:{__html:r.summary},className:"mt-1"})]})]})};var z=function(e){var t=e.episode,c=e.children,s=Object(n.useState)(!1),r=Object(i.a)(s,2),a=r[0],o=r[1];return Object(h.jsxs)("div",{className:"border-t-2 border-gray-200 flex flex-col -my-0.5",children:[Object(h.jsxs)("div",{className:"flex justify-between px-5 pt-1",children:[Object(h.jsxs)("div",{className:"flex items-center flex-grow",children:[c,Object(h.jsxs)("h3",{className:"ml-6 mr-2 w-24",children:["Episode ",t.number]}),Object(h.jsx)("h2",{className:"font-bold text-lg",children:t.name})]}),Object(h.jsx)("button",{onClick:function(){return o((function(e){return!e}))},className:"h-10 w-10",children:a?Object(h.jsx)(m.a,{icon:O.c}):Object(h.jsx)(m.a,{icon:O.b})})]}),Object(h.jsx)("section",{className:"px-5 pb-1",children:a&&Object(h.jsx)(I,Object(N.a)({},e))})]})};var D=function(e){var t=e.episodeId,c=e.watched,n=e.handleWatch;return Object(h.jsx)("button",{onClick:function(){return n(t)},className:"h-6 w-6 border-2 rounded-full border-indigo-800 ".concat(c?"bg-indigo-200":""),children:c?Object(h.jsx)(m.a,{icon:O.a,className:"text-indigo-800 text-lg pb-1.5"}):""})};var C=function(e){var t=e.showId,c=e.timezone,s=e.watchedEpisodes,r=e.setWatchedEpisodes,a=Object(n.useState)([]),o=Object(i.a)(a,2),l=o[0],j=o[1],b=Object(n.useState)(!1),x=Object(i.a)(b,2),m=x[0],O=x[1],f=Object(n.useState)([]),p=Object(i.a)(f,2),v=p[0],w=p[1],g=Object(n.useState)(1),N=Object(i.a)(g,2),S=N[0],k=N[1];return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(d.a.mark((function e(){var c,n,s,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://api.tvmaze.com/shows/".concat(t,"/episodes?specials=1"));case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,s=Object.values(n),j(s),r=Object(y.a)(new Set(s.map((function(e){return e.season})))),w(r),O(!0),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(h.jsx)("div",{className:"max-w-screen-md mx-auto bg-white border-t-2 border-gray-200",children:m&&Object(h.jsxs)("div",{children:[Object(h.jsx)("ul",{className:"flex overflow-x-scroll justify-start border-b-2 border-gray-200",children:v.map((function(e){return Object(h.jsxs)("li",{onClick:function(){return k(e)},className:"bg-white ".concat(e===S&&"font-bold bg-indigo-200"," px-3 py-3 flex-shrink-0 cursor-pointer"),children:["Season ",e]})}))}),l.filter((function(e){return e.season===S})).map((function(e){return Object(h.jsx)(z,{episode:e,timezone:c,children:Object(h.jsx)(D,{episodeId:e.id,watched:!!s.includes(e.id),handleWatch:r})},e.id)}))]})})},L=c(28);var W=function(e){var t=e.showsData,c=e.watchedEpisodesData;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Watcher Statistics"}),Object(h.jsxs)("h2",{children:[Object(h.jsx)("span",{children:"Shows Tracked: "}),t.length]}),Object(h.jsxs)("h2",{children:[Object(h.jsx)("span",{children:"Episodes Watched: "}),c.length]}),Object(h.jsxs)("h2",{children:[Object(h.jsx)("span",{children:"Watch Time: "}),c.reduce((function(e,t){return e+t.runtime}),0),"mins"]}),Object(h.jsx)("h2",{children:Object(h.jsxs)("span",{children:["Top Genres: ",function(){var e,c=t.map((function(e){return e.genres})).reduce((function(e,t){return e.concat(t)}),[]),n={},s=Object(L.a)(c);try{for(s.s();!(e=s.n()).done;){var r=e.value;n[r]=n.hasOwnProperty(r)?n[r]+=1:1}}catch(a){s.e(a)}finally{s.f()}return Object(y.a)(Object.entries(n)).sort((function(e,t){return t[1]-e[1]})).map((function(e){return e[0]})).slice(0,3)}().join(", ")]})})]})},_=function(e,t){return t=+t,e.includes(t)?e.filter((function(e){return e!==t})):[].concat(Object(y.a)(e),[t])},J=function(e){var t=Object(n.useReducer)(_,JSON.parse(sessionStorage.getItem(e))||[]),c=Object(i.a)(t,2),s=c[0],r=c[1];return Object(n.useEffect)((function(){sessionStorage.setItem(e,JSON.stringify(s))}),[s,e]),[s,r]};var M=function(e){var t=e.trackedShows,c=e.handleTrack,s=J("watchedEpisodes"),r=Object(i.a)(s,2),a=r[0],l=r[1],j=Object(n.useState)([]),b=Object(i.a)(j,2),x=b[0],m=b[1],O=Object(n.useState)([]),f=Object(i.a)(O,2),p=f[0],v=f[1];return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=[],e.prev=1,e.next=4,Promise.all(t.map(function(){var e=Object(u.a)(d.a.mark((function e(t){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://api.tvmaze.com/shows/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:s=e.sent,c.push(s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:m(c),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(n.useEffect)((function(){(function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,Promise.all(a.map(function(){var e=Object(u.a)(d.a.mark((function e(c){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://api.tvmaze.com/episodes/".concat(c));case 2:return n=e.sent,e.next=5,n.json();case 5:s=e.sent,t.push(s);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:v(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(h.jsxs)(o.d,{children:[Object(h.jsx)(o.b,{exact:!0,path:"/stats",children:Object(h.jsx)(W,{showsData:x,watchedEpisodesData:p})}),Object(h.jsx)(o.b,{exact:!0,path:"/shows",children:Object(h.jsx)(w,{trackedShows:t,handleTrack:c,showsData:x})}),x.map((function(e){var t,c;return Object(h.jsxs)(o.b,{exact:!0,path:"/shows/".concat(e.id),children:[Object(h.jsx)(g,{show:e}),Object(h.jsx)(C,{showId:e.id,timezone:null===(t=e.network)||void 0===t||null===(c=t.country)||void 0===c?void 0:c.timezone,watchedEpisodes:a,setWatchedEpisodes:l})]},e.id)}))]})};var P=function(e){var t=e.handleSubmitSearch,c=Object(n.useState)(""),s=Object(i.a)(c,2),r=s[0],a=s[1],o=Object(n.useRef)(null);return Object(h.jsxs)("form",{onSubmit:function(e){t(e,r),o.current.value=""},className:"flex items-stretch justify-center",children:[Object(h.jsx)("input",{type:"text",onChange:function(e){return a(e.target.value)},className:"mx-3 px-3 rounded text-gray-900",ref:o}),Object(h.jsx)("button",{type:"submit",className:"bg-indigo-300 hover:bg-indigo-400 rounded px-3 py-1.5 mx-3",children:"Search"})]})};var R=function(){var e=J("trackedShows"),t=Object(i.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(""),a=Object(i.a)(r,2),l=a[0],d=a[1],u=Object(n.useState)(!1),j=Object(i.a)(u,2),b=j[0],x=j[1];return Object(h.jsxs)("div",{className:"px-10 py-10 font-crimson bg-gray-100 min-h-screen h-full text-xl",children:[Object(h.jsx)(v,{children:Object(h.jsx)(P,{handleSubmitSearch:function(e,t){e.preventDefault(),d(t),x(!0)}})}),b&&Object(h.jsx)(o.a,{to:"/search"}),Object(h.jsx)(M,{trackedShows:c,handleTrack:s}),Object(h.jsx)(o.d,{children:Object(h.jsx)(o.b,{path:"/search",children:Object(h.jsx)(p,{trackedShows:c,handleTrack:s,searchQuery:l,setSearchRequested:x})})})]})};a.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(j.a,{basename:"/",children:Object(h.jsx)(R,{})})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.3b176204.chunk.js.map