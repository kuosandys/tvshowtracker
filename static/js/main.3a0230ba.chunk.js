(this.webpackJsonptvshow_tracker=this.webpackJsonptvshow_tracker||[]).push([[0],{31:function(e,t,c){},45:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),s=c(21),a=c.n(s),i=(c(31),c(4)),o=c(2),l=c(5),d=c.n(l),u=c(10),h=c(0);var j=function(e){var t=e.handleSubmitSearch,c=Object(n.useState)(""),r=Object(i.a)(c,2),s=r[0],a=r[1];return Object(h.jsxs)("form",{onSubmit:function(e){return t(e,s)},className:"flex items-stretch justify-center",children:[Object(h.jsx)("input",{type:"text",onChange:function(e){a(e.target.value)},className:"mx-3 px-3 rounded"}),Object(h.jsx)("button",{type:"submit",className:"bg-blue-400 hover:bg-blue-700 rounded px-3 py-1.5 text-white mx-3",children:"Search"})]})},b=c(9);var x=function(e){var t=e.show,c=e.children,n=Object(o.f)();return Object(h.jsx)(b.b,{to:"".concat(n.url,"/").concat(t.id),children:c})};var m=function(e){var t,c,n,r,s,a,i=e.show,o=e.children;return Object(h.jsxs)("div",{className:"border-box flex flex-col items-stretch overflow-hidden h-96 w-52 bg-white m-4",children:[Object(h.jsx)(x,{show:i,children:Object(h.jsx)("img",{src:null===(t=i.image)||void 0===t?void 0:t.medium,alt:i.name,className:"h-72 w-52 mx-auto bg-gray-300 text-lg text-center italic text-white align"})}),Object(h.jsx)("h2",{className:"text-lg font-bold m-2 text-center truncate",children:i.name}),Object(h.jsxs)("section",{className:"self-stretch flex justify-between items-center text-sm mx-4",children:[Object(h.jsxs)("div",{className:"flex items-center",children:[Object(h.jsx)("img",{src:"https://www.countryflags.io/".concat(null===(c=i.network)||void 0===c||null===(n=c.country)||void 0===n?void 0:n.code.toLowerCase(),"/flat/32.png"),alt:(null===(r=i.network)||void 0===r||null===(s=r.country)||void 0===s?void 0:s.code)||""}),Object(h.jsx)("h3",{children:"".concat((null===(a=i.premiered)||void 0===a?void 0:a.slice(0,4))||"-")})]}),o]})]})};var O=function(e){var t=e.showId,c=e.trackedShows,n=e.handleTrack;return Object(h.jsx)("button",{onClick:function(){return n(t)},className:c.includes(t)?"bg-blue-400 hover:bg-blue-700 rounded px-3 py-1.5 text-white":"bg-blue-700 hover:bg-blue-400 rounded px-3 py-1.5 text-white",children:c.includes(t)?"Tracked":"Track Show"})};var p=function(e){var t=e.trackedShows,c=e.handleTrack,r=Object(n.useState)([]),s=Object(i.a)(r,2),a=s[0],o=s[1],l=Object(n.useState)(!1),b=Object(i.a)(l,2),x=b[0],p=b[1],f=function(){var e=Object(u.a)(d.a.mark((function e(t,c){var n,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("https://api.tvmaze.com/search/shows?q=".concat(c));case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,s=Object.values(r).sort((function(e,t){return e.score<t.score})),o(s),p(!0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),alert(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,c){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"max-w-screen-lg mx-auto",children:[Object(h.jsx)(j,{handleSubmitSearch:f}),Object(h.jsx)("div",{className:"flex flex-wrap justify-center",children:x&&a.map((function(e){return Object(h.jsx)(m,{show:e.show,children:Object(h.jsx)(O,{showId:e.show.id,trackedShows:t,handleTrack:c})},e.show.id)}))})]})};var f=function(){return Object(h.jsx)("div",{className:"absolute top-0 left-0 right-0 border-2 bg-gray-800 text-white",children:Object(h.jsxs)("ul",{className:"flex h-12 items-center",children:[Object(h.jsx)("li",{className:"mx-5 font-bold hover:text-blue-300 hover:underline",children:Object(h.jsx)(b.b,{to:"/",children:"Home"})}),Object(h.jsx)("li",{className:"mx-5 font-bold hover:text-blue-300 hover:underline",children:Object(h.jsx)(b.b,{to:"/shows",children:"My Shows"})}),Object(h.jsx)("li",{className:"mx-5 font-bold hover:text-blue-300 hover:underline",children:Object(h.jsx)(b.b,{to:"/stats",children:"Stats"})}),Object(h.jsx)("li",{className:"mx-5 font-bold hover:text-blue-300 hover:underline",children:Object(h.jsx)(b.b,{to:"/explore",children:"Explore"})})]})})};var v=function(e){var t=e.trackedShows,c=e.handleTrack,n=e.showsData;return Object(h.jsx)("div",{className:"flex flex-wrap justify-center max-w-screen-lg mx-auto",children:n.map((function(e){return Object(h.jsx)(m,{show:e,children:Object(h.jsx)(O,{showId:e.id,trackedShows:t,handleTrack:c})},e.id)}))})};var w=function(e){var t,c,n,r,s,a=e.show;return Object(h.jsxs)("div",{className:"max-w-screen-lg mx-auto flex",children:[Object(h.jsx)("img",{src:null===(t=a.image)||void 0===t?void 0:t.medium,alt:"TV show poster",className:"max-h-80 my-auto"}),Object(h.jsxs)("section",{className:"ml-10",children:[Object(h.jsx)("h2",{className:"text-3xl my-5",children:a.name}),Object(h.jsxs)("h3",{children:[Object(h.jsx)("span",{className:"font-bold",children:"Country: "}),(null===(c=a.network)||void 0===c||null===(n=c.country)||void 0===n?void 0:n.name)||"None"]}),Object(h.jsxs)("h3",{children:[Object(h.jsx)("span",{className:"font-bold",children:"Language: "}),a.language]}),Object(h.jsxs)("h3",{children:[Object(h.jsx)("span",{className:"font-bold",children:"Premiered: "}),(null===(r=a.premiered)||void 0===r?void 0:r.slice(0,4))||"Unknown"]}),Object(h.jsxs)("h3",{children:[Object(h.jsx)("span",{className:"font-bold",children:"Status: "}),a.status]}),Object(h.jsxs)("h3",{children:[Object(h.jsx)("span",{className:"font-bold",children:"Genres: "}),null===(s=a.genres)||void 0===s?void 0:s.join(", ")]}),Object(h.jsx)("p",{dangerouslySetInnerHTML:{__html:a.summary},className:"my-5"})]})]})},g=c(26),y=c(25),k=c(13),N=c(23),S=c.n(N),T=c(47);var E=function(e){var t,c,n,r=e.episode,s=e.timezone;return Object(h.jsxs)("div",{className:"grid grid-cols-3 my-3",children:[Object(h.jsxs)("section",{children:[Object(h.jsx)("img",{src:r.image.medium,alt:r.name}),Object(h.jsx)("h4",{children:"Aired ".concat(Object(T.a)(Object(y.a)(Date,Object(k.a)(null===(t=r.airdate)||void 0===t?void 0:t.split("-"))),"LLL do, yyyy")," ").concat(r.airtime," ").concat((null===(c=S()(r.airdate))||void 0===c||null===(n=c.tz(s))||void 0===n?void 0:n.zoneAbbr())||"")})]}),Object(h.jsx)("p",{dangerouslySetInnerHTML:{__html:r.summary},className:"col-span-2 pl-5"})]})};var I=function(e){var t=e.episode,c=e.children,r=Object(n.useState)(!1),s=Object(i.a)(r,2),a=s[0],o=s[1];return Object(h.jsxs)("div",{className:"border-2 border-gray-400 flex flex-col my-3",children:[Object(h.jsxs)("div",{className:"flex justify-between px-5 pt-3",children:[Object(h.jsxs)("section",{children:[Object(h.jsx)("h3",{children:"Season ".concat(t.season," Episode ").concat(t.number)}),Object(h.jsx)("h2",{className:"font-bold text-lg",children:t.name})]}),Object(h.jsxs)("section",{className:"w-60 flex justify-between items-center",children:[Object(h.jsx)("button",{onClick:function(e){o((function(e){return!e}))},className:"bg-gray-400 hover:bg-gray-500 rounded px-3 py-1.5 text-white",children:"Expand"}),c]})]}),Object(h.jsx)("section",{className:"px-5 pb-3",children:a&&Object(h.jsx)(E,Object(g.a)({},e))})]})};var z=function(e){var t=e.episodeId,c=e.watched,n=e.handleWatch;return Object(h.jsx)("button",{onClick:function(){return n(t)},className:c?"bg-blue-400 hover:bg-blue-700 rounded px-3 py-1.5 text-white":"bg-blue-700 hover:bg-blue-400 rounded px-3 py-1.5 text-white",children:c?"Watched":"Add to Watched"})};var W=function(e){var t=e.showId,c=e.timezone,r=e.watchedEpisodes,s=e.setWatchedEpisodes,a=Object(n.useState)([]),o=Object(i.a)(a,2),l=o[0],j=o[1],b=Object(n.useState)(!1),x=Object(i.a)(b,2),m=x[0],O=x[1];return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(d.a.mark((function e(){var c,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://api.tvmaze.com/shows/".concat(t,"/episodes?specials=1"));case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,r=Object.values(n),j(r),O(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),m?Object(h.jsx)("div",{className:"max-w-screen-md mx-auto",children:l.map((function(e){return Object(h.jsx)(I,{episode:e,timezone:c,children:Object(h.jsx)(z,{episodeId:e.id,watched:!!r.includes(e.id),handleWatch:s})},e.id)}))}):Object(h.jsx)("div",{children:Object(h.jsx)("p",{children:"loading"})})},D=c(24);var L=function(e){var t=e.showsData,c=e.watchedEpisodesData;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Watcher Statistics"}),Object(h.jsxs)("h2",{children:[Object(h.jsx)("span",{children:"Shows Tracked: "}),t.length]}),Object(h.jsxs)("h2",{children:[Object(h.jsx)("span",{children:"Episodes Watched: "}),c.length]}),Object(h.jsxs)("h2",{children:[Object(h.jsx)("span",{children:"Watch Time: "}),c.reduce((function(e,t){return e+t.runtime}),0),"mins"]}),Object(h.jsx)("h2",{children:Object(h.jsxs)("span",{children:["Top Genres: ",function(){var e,c=t.map((function(e){return e.genres})).reduce((function(e,t){return e.concat(t)}),[]),n={},r=Object(D.a)(c);try{for(r.s();!(e=r.n()).done;){var s=e.value;n[s]=n.hasOwnProperty(s)?n[s]+=1:1}}catch(a){r.e(a)}finally{r.f()}return Object(k.a)(Object.entries(n)).sort((function(e,t){return t[1]-e[1]})).map((function(e){return e[0]})).slice(0,3)}().join(", ")]})})]})},C=function(e,t){return t=+t,e.includes(t)?e.filter((function(e){return e!==t})):[].concat(Object(k.a)(e),[t])},_=function(e){var t=Object(n.useReducer)(C,JSON.parse(localStorage.getItem(e))||[]),c=Object(i.a)(t,2),r=c[0],s=c[1];return Object(n.useEffect)((function(){localStorage.setItem(e,JSON.stringify(r))}),[r,e]),[r,s]};var J=function(e){var t=e.trackedShows,c=e.handleTrack,r=_("watchedEpisodes"),s=Object(i.a)(r,2),a=s[0],l=s[1],j=Object(n.useState)([]),b=Object(i.a)(j,2),x=b[0],m=b[1],O=Object(n.useState)([]),p=Object(i.a)(O,2),f=p[0],g=p[1];return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(d.a.mark((function e(){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=[],e.prev=1,e.next=4,Promise.all(t.map(function(){var e=Object(u.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://api.tvmaze.com/shows/".concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,c.push(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:m(c),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(n.useEffect)((function(){(function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.prev=1,e.next=4,Promise.all(a.map(function(){var e=Object(u.a)(d.a.mark((function e(c){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://api.tvmaze.com/episodes/".concat(c));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t.push(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:g(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{exact:!0,path:"/stats",children:Object(h.jsx)(L,{showsData:x,watchedEpisodesData:f})}),Object(h.jsx)(o.a,{exact:!0,path:"/shows",children:Object(h.jsx)(v,{trackedShows:t,handleTrack:c,showsData:x})}),x.map((function(e){var t,c;return Object(h.jsxs)(o.a,{exact:!0,path:"/shows/".concat(e.id),children:[Object(h.jsx)(w,{show:e}),Object(h.jsx)(W,{showId:e.id,timezone:null===(t=e.network)||void 0===t||null===(c=t.country)||void 0===c?void 0:c.timezone,watchedEpisodes:a,setWatchedEpisodes:l})]},e.id)}))]})};var M=function(){var e=_("trackedShows"),t=Object(i.a)(e,2),c=t[0],n=t[1];return Object(h.jsxs)("div",{className:"px-10 pt-20 font-sans bg-gray-100 min-h-screen h-full",children:[Object(h.jsx)(f,{}),Object(h.jsx)(J,{trackedShows:c,handleTrack:n}),Object(h.jsx)(o.c,{children:Object(h.jsx)(o.a,{path:"/explore",children:Object(h.jsx)(p,{trackedShows:c,handleTrack:n})})})]})};a.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(b.a,{basename:"/tvshowtracker",children:Object(h.jsx)(M,{})})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.3a0230ba.chunk.js.map